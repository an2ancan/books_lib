<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Document</title>
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
            crossorigin="anonymous">
    </head>
    <body>
        <div id="app" class="container">
            <div class="row">
                <div class="col mt-4">
                    {{ message }}
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <div class = "mt-3 mb3">
                        <label for="message-input" class="from-label">Message</label>
                        <input 
                            v-model="message"
                            type="text"
                            class="form-control"
                            id="message-input">
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col mt-3 mb-3">
                    <h2>{{counter}}</h2>
                    <hr>
                    <button v-on:click="increment" class = "btn btn-outline-secondary">Increment</button>
                    &nbsp;
                    <button v-on:click="decrement" class = "btn btn-outline-secondary">Decrement</button>
                </div>
            </div>
            <div class="row mt-3">
                <div class="col">
                    <form class="needs-validation" novalidate>
                        <text-input
                            required="required"
                            label="First Name"
                            name="first-name"
                            type="text"
                        ></text-input>

                        <text-input
                            required="true"
                            label="Last Name"
                            name="last-name"
                            type="text"
                        ></text-input>

                        <text-input
                            required="true"
                            label="Email"
                            name="email"
                            type="email"
                        ></text-input>

                        <hr>
                        <input type="submit" class="btn btn-primary" value="Submit" >
                    </form>
                </div>
            </div>
        </div>

        <script
            src="https://cdn.jsdelivr.net/npm/vue@3.5.13/dist/vue.global.min.js"></script>
        <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
            crossorigin="anonymous">
        </script>
        <script>
            let data = {
                counter: 0,
                message: "Hello, Vue",
            }

            const TextInput = {
                props: {
                    name: String,
                    type: String,
                    label: String,
                    placeholder: String,
                    required: String,
                    min: String,
                    max: String,
                    value: String,
                },
                template: `
                    <div class="mb-3">
                        <label :for="name" class="form-label">{{label}}</label>
                        <input 
                            :type="type"
                            :name="name"
                            :placeholder="placeholder"
                            :required="required"
                            :min="min"
                            :max="max"
                            :value="value"
                            class="form-control"
                    </div>
                `,
            }

            const vm = Vue.createApp({
                data() {
                    return data
                },
                methods: {
                    increment(){
                        this.counter++
                    },
                    decrement(){
                        this.counter--
                    }
                },
                components: {
                    TextInput,
                },

                mounted() {
                    console.log("Vue is mounted");
                    (function () {
                        'use strict'
                        
                        // Fetch all the forms we want to apply custom Bootstrap validation styles to
                        var forms = document.querySelectorAll('.needs-validation')
                        
                        // Loop over them and prevent submission
                        Array.prototype.slice.call(forms)
                            .forEach(function (form) {
                            form.addEventListener('submit', function (event) {
                                if (!form.checkValidity()) {
                                event.preventDefault()
                                event.stopPropagation()
                                }
                        
                                form.classList.add('was-validated')
                            }, false)
                        })
                    })()
                },

                created() {
                    console.log("Vue is created")
                },

                updated() {
                    console.log("Vue is updated")
                },

            }).mount('#app');

        </script>
    </body>
</html>